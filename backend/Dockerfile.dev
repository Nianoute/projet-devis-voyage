# Image dev : deps uniquement, pas de build (hot reload via volume + nest --watch)
FROM node:lts

WORKDIR /app

# Copier uniquement les fichiers de dépendances
COPY package*.json ./
COPY tsconfig.json ./
COPY . .
RUN npm install

# Le code source sera monté en volume depuis l'hôte
# CMD lance le serveur en mode watch pour le hot reload
EXPOSE 3000

CMD ["npm", "run", "start:dev"]
